<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="/js/jquery.min.css" th:src="@{/js/jquery.min.js}"></script>
    <script type="text/javascript" src="/js/bootstrap.min.css" th:src="@{/js/bootstrap.min.js}"></script>
    <link rel="stylesheet" href="/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}">
</head>
<body>
<div class="container">
    <div class="audit table">
        <table class="table table-bordered">
            <caption>边框表格布局</caption>
            <thead>
            <tr>
                <th>科目</th>
                <th>反馈教学班</th>
                <th>作业名称</th>
                <th>反馈时间</th>
                <th>反馈内容</th>
                <th>回复内容</th>
                <th>进度</th>
                <th>操作</th>
            </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>

</div>
<script th:inline="javascript">
    var auditList = [[${auditList}]];
    console.log(auditList);
    auditList.forEach(myFunction);
    //遍历作业反馈信息
    function myFunction(value, index, array) {
        if (value.replybody == null){
            value.replybody = "无回复"
        }
        var auditid = "'" + value.auditid + "'";
        $('.audit .table tbody').append('<tr>' +
            '<td>' + value.coursename + '</td>' +
            '<td>' + value.courseclass + '</td>' +
            '<td>' + value.workname + '</td>' +
            '<td>' + value.commitdate + '</td>' +
            '<td>' + value.commitbody + '</td>' +
            '<td>' + value.replybody + '</td>' +
            '<td>' + value.state + '</td>'+
            '<td><a href="#" onclick="deleteAudit('+ auditid +')">删除</a></td></tr>');
    }
    
    function deleteAudit(auditid) {
        var pd = new FormData();
        pd.append("auditid",auditid);
        $.ajax({
            url:'/student/deleteAudit',
            type:'POST',
            processData: false,
            contentType: false,
            data: pd,
            success:function(data){
                alert("删除成功！");
                location.reload();
            },error:function (e) {
                alert('删除失败！！');
            }
        });
    }
</script>
</body>
</html>