<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ljq.bishe.mapper.HandInMapper">
    <select id="getLearningCourse" resultType="Student">
        select DISTINCT coursename from selectcourse where stuid=#{stuid};
    </select>
    <select id="getCourseClass" resultType="Student">
        select coursename,courseclass from selectcourse where stuid=#{stuid};
    </select>
    <select id="workInfo" resultType="Homework">
        select h.*,s.state from homework h,score s where h.workid=s.workid and s.stuid=#{stuid};
    </select>
    <update id="handIn" parameterType="String">
      update score set state='已上交',uploadworkname=#{uploadWorkName} where workid in
      (select workid from homework WHERE course=#{course} and uploadclass=#{courseClass}  and workname=#{workName}) and stuid=#{stuid};
    </update>
    <select id="getHandInPath" resultType="String">
        select h.filepath from score s,homework h where s.workid=h.workid
         and h.uploadclass=#{courseClass} and h.course=#{course} and s.stuid=#{stuid} and h.workname=#{workName};
    </select>
    <select id="getWorkName" resultType="Homework">
      select h.workname,h.course,h.uploadclass from score s
      left join homework h on s.workid = h.workid
      where s.stuid=#{stuid};
    </select>
    <select id="getStuname" resultType="String" parameterType="String">
        select DISTINCT stuname from student where stuid=#{stuid};
    </select>
</mapper>